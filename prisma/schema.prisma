generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Board {
  idx Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  order Int

  // 보드와 카드 ( 1 : N )
  cards Card[]

  // 보드와 카테고리 ( 1 : 1 )
  category Category?
}

model Card {
  idx Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  name String
  date DateTime
  order Int
  pdf String?

  // 보드와 카드 ( 1 : N )
  board Board @relation(fields: [boardIdx], references: [idx], onUpdate: Cascade, onDelete: Cascade)
  boardIdx Int

  // 카드와 플랫폼 ( 1 : N )
  platform Platform @relation(fields: [platformIdx], references: [platform], onUpdate: Cascade, onDelete: Cascade)
  platformIdx String

  // 카드와 태그 ( N : M )
  tags Tag[]
}

model Category {
  category String @id

  board Board @relation(fields: [boardIdx], references: [idx], onUpdate: Cascade, onDelete: Cascade)
  boardIdx Int @unique
}
model Platform {
  platform String @id

  // 카드와 플랫폼 ( 1 : N )
  cards Card[]
}
model Tag {
  tag String @id

  // 카드와 태그 ( N : M )
  cards Card[]
}